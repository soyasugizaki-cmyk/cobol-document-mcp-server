---
contentId: custom-domain
directory: manual
---

# メディアのカスタムドメイン設定

microCMSにアップロードしたメディアのURLに、カスタムドメインを設定できます。microCMSにアップロードしたメディアに対し、独自ドメインを割り当てたい場合にご活用ください。

本機能は、**microCMS内部のリバースプロキシを通じて、お客様が所有している独自ドメインへのアクセスをmicroCMS上のメディアに転送する仕組み**です。  
独自のサーバーで管理している画像やファイルをmicroCMSのメディアとして利用する機能ではありませんので、ご注意ください。

メディアのカスタムドメイン設定はEnterpriseプランでご利用いただける機能です。  
プランごとに利用できる機能については、[料金プランページ](https://microcms.io/pricing)をご覧ください。

機能の詳細
=====

通常、microCMSにアップロードしたメディアのURLは以下のような共通のドメインとなっています。  
  
**画像：**`images.microcms-assets.io`  
**ファイル：**`files.microcms-assets.io`  
  
カスタムドメイン機能を設定することで、microCMS上の画像やファイルに対し、お客様が所有している独自のドメインを割り当てることができます。

###   

画像の設定例
------

### 設定前

`https://images.microcms-assets.io/assets/xxxxx/xxxxx/image.png`  

### 設定後

`https://images.example.com/assets/xxxxx/xxxxx/image.png`  

ファイルの設定例
--------

### 設定前

`https://files.microcms-assets.io/assets/xxxxx/xxxxx/file.pdf`  

### 設定後

`https://files.example.com/assets/xxxxx/xxxxx/file.pdf`  
  
なお、共通のドメインに対してアクセスした際のリダイレクトも設定されますので、公開済みのURLに対しての考慮は必要ございません。

設定方法
====

本機能は管理画面からは設定できず、お問い合わせベースにてご対応しております。  
設定にあたっては、ユーザーさまと当社の両者にて作業が発生いたします。  
設定をご希望される場合、画面右下のチャット欄より、事前にご連絡をお願いいたします。

ユーザーさまにて必要な作業
-------------

### 1\. DNSサーバの設定

DNSサーバにて、任意のドメイン(例: `images.example.com` / `files.example.com`)に対する CNAMEレコードを設定し、microCMSで管理するドメインを参照するように、設定いただきます。

    images.example.com. IN CNAME cname.microcms-dns.io.
    files.example.com. IN CNAME cname.microcms-dns.io.

画像とファイルについて、同一のカスタムドメインを設定することはできません。お手数ですが、画像とファイルでそれぞれ個別のカスタムドメインをご用意ください。

当社にて必要な作業
---------

### 1\. 証明書の発行・配置

SSL証明書（DV証明書）を当社にて発行し、当社サーバに配置します。

**Enterpriseプラン**をご利用の場合、OV/EV証明書利用のご相談が可能です。その場合、以下の点についてご留意ください。

*   OV/EV証明書を利用する場合は、ユーザーさまにて証明書を発行いただく必要がございます。 当社で作成したCSRファイルをもとに、証明書を発行いただき、受領後、弊社サーバに配置します。詳しい進め方については、個別でご調整を実施いたします。
*   OV/EV証明書を利用される場合は、定期的に証明書の再発行を実施いただく必要がございます。また当社作業による再配置が必要になります。つきましては、**証明書の有効期間は1年以上**のものを発行いただきますようお願いします。
*   ワイルドカード証明書やマルチドメイン証明書など、当社にて管理しないドメインが含まれる証明書は、セキュリティの関係上、受け入れすることができません。あらかじめご了承ください。

### 2\. 配信設定の変更

メディアの配信ドメインを変更いたします。この時点で、以下の情報が変更されます。

*   APIのレスポンスに含まれるメディアURL（画像/ファイル）
*   Webhookのリクエストボディに含まれるメディアURL
*   管理画面内のメディアURL

また旧URLにアクセスした際に、新URLへの302リダイレクトが有効化されます。

カスタムドメインへの切り替え完了までの期間の目安につきましては、それぞれ以下の通りです。

*   DV証明書の場合：2週間〜
*   OV／EV証明書の場合：1ヶ月〜

**URLを直接指定している箇所については、配信設定の変更を行なっても、カスタムドメインは適用されません。**リダイレクトの処理がかかるため、表示には問題ありませんが、リンクのURLとしては旧URLが残る可能性がありますので、ご注意ください。

  
カスタムドメインが適用されない例としては、以下のようなケースが考えられます。

*   リッチエディタ内のリンクに、PDFなどのメディアURLを指定している
*   テキストフィールドにてメディアURLを入力して管理している
*   フロントエンドのコードから、直接メディアURLを呼び出している

複数環境機能にて作成した環境には、カスタムドメインは適用されません。

設定の確認方法
=======

設定されたカスタムドメインは、サービス設定 > カスタムドメインから確認することができます。  
  
![](https://images.microcms-assets.io/assets/d6af1616730544a596d299c20834f460/18ad572f07b64b5cb51a368dc02c4019/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202023-03-08%2017.48.26.png)